{"ast":null,"code":"import { secretKey } from './../../../api/secretKey';\n\nconst sqlite = require('sqlite');\n\nimport { verify } from 'jsonwebtoken';\nimport { openDB } from '../../../api/openDB';\nexport const authenticated = fn => async (req, res) => {\n  verify(req.cookies.auth, secretKey, async function (err, decoded) {\n    // err\n    // decoded undefined\n    if (!err && decoded) {\n      return await fn(req, res);\n    }\n\n    res.status(401).json({\n      message: \"Sorry you are not authenticated\"\n    });\n  });\n};\nexport default authenticated(async function getAllPeople(req, res) {\n  const db = await openDB();\n  const people = await db.all('SELECT id,name,email FROM People');\n  res.json(people);\n});","map":null,"metadata":{},"sourceType":"module"}